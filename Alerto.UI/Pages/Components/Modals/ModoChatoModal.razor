<div id="modalModoChato"
     class="absolute top-0 w-[100%] h-[100%] bg-Secundaria bg-opacity-60 z-50 hidden justify-center items-center">
    <div class=" shadow-md flex flex-col shadow-Primaria rounded-md w-[30%] m-2 bg-Neutra">
        <div class=" flex justify-between text-Neutra bg-Primaria h-[50%] p-2 items-center text-center">
            <h1 class="text-xl font-bold">Modo Chato</h1>
            @if (ModoChato.IsAtivated)
            {
                <button class="outline outline-2 px-3 p-1 rounded font-bold @btnModoChatoStyle"
                        @onclick="() => ModoChato.IsAtivated = true">Ativar
                </button>
            }
            else
            {
                <button class="outline text-Primaria bg-Neutra outline-2 px-3 p-1 rounded font-bold @btnModoChatoStyle"
                        @onclick="() => ModoChato.IsAtivated = false">
                    Desativar
                </button>
            }
        </div>
        <div class=" flex flex-col justify-center h-[50%] items-center p-4 text-center p-1">
            <input type="number" placeholder="Frequencia dos Alarmes (dias)"
                   @bind="ModoChato.FrequenciaAlerta"
                   class=" py-2 caret-Intermedia focus:outline-0 focus:border-b-Intermedia transition-all w-full border-b-2 border-Primaria">
            <AlertoInput Tipo="number" Value="@ModoChato.FrequenciaAlerta" Icone="fa fa-reload"
                         Placeholder="Frequencia dos Alarmes"></AlertoInput>

            <input type="number" placeholder="Quantos dias antes de comeÃ§ar?"
                   @bind="ModoChato.DiasAntes"
                   class=" py-2 caret-Intermedia focus:outline-0 focus:border-b-Intermedia transition-all w-full border-b-2 border-Primaria">
            <input type="date" placeholder="Quando termina?"
                   @bind="ModoChato.DataTermino"
                   class=" py-2 caret-Intermedia focus:outline-0 focus:border-b-Intermedia transition-all w-full border-b-2 border-Primaria">
        </div>
        <div class=" flex  p-2 space-x-4 justify-around text-center h-[25%]">
            <button class=" p-2 bg-Primaria w-full  rounded text-Neutra hover:scale-[1.05] transition-all"
                    @onclick="SaveChanges">
                Salvar
            </button>
            <button class=" p-2 bg-Primaria w-full rounded text-Neutra hover:scale-[1.05] transition-all"
                    @onclick="CloseModal">
                Fechar
            </button>
            @TextoErro
        </div>
    </div>
</div>

@code {
    string TextoErro = "";

    public string btnModoChatoStyle => ModoChato.IsAtivated ? "bg-Neutra text-Primaria" : "bg-none text-Neutra";

    [Parameter] public ModoChatoDTO ModoChato { get; set; } = new ModoChatoDTO();

    [Parameter] public Action<ModoChatoDTO> OnModoChatoChanged { get; set; }

    private void SaveChanges()
    {
        OnModoChatoChanged.Invoke(ModoChato);
        js.InvokeVoidAsync("showOrHideModal", "modalModoChato", false);
    }

    private void CloseModal()
    {
        OnModoChatoChanged.Invoke(ModoChato);
        js.InvokeVoidAsync("showOrHideModal", "modalModoChato", false);
    }

}